<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydra32 | ESP32 Wi-Fi Security Tool</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7e22ce;
            --light: #ffffff;
            --light-gray: #f8fafc;
            --medium-gray: #e2e8f0;
            --dark-gray: #64748b;
            --text: #1e293b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        body {
            background: var(--light-gray);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: var(--light);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .logo i {
            font-size: 1.8rem;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
        }
        
        .nav-links a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: var(--transition);
            position: relative;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: var(--transition);
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding-top: 80px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%);
            position: relative;
            overflow: hidden;
        }
        
        .hero-content {
            max-width: 650px;
            z-index: 2;
            padding: 2rem 0;
        }
        
        .hero h1 {
            font-size: 3rem;
            line-height: 1.2;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            color: var(--dark-gray);
        }
        
        .hero-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .btn {
            padding: 12px 28px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.2);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-outline:hover {
            background: rgba(37, 99, 235, 0.05);
            transform: translateY(-3px);
        }
        
        .device-showcase {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 500px;
            height: 400px;
            background: url('https://raw.githubusercontent.com/SpacehuhnTech/esp8266_deauther/master/docs/device_v3.jpg') center/contain no-repeat;
            z-index: 1;
            opacity: 0.95;
        }
        
        /* Section Styling */
        section {
            padding: 100px 0;
            background: var(--light);
        }
        
        .alternate {
            background: var(--light-gray);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }
        
        .section-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary);
            position: relative;
            display: inline-block;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--primary);
            border-radius: 2px;
        }
        
        .section-subtitle {
            color: var(--dark-gray);
            font-size: 1.25rem;
            max-width: 700px;
            margin: 20px auto 0;
        }
        
        /* Card Styling */
        .card {
            background: var(--light);
            border-radius: 16px;
            padding: 30px;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
            border: 1px solid var(--medium-gray);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .card-icon {
            width: 60px;
            height: 60px;
            background: rgba(37, 99, 235, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .card-icon i {
            font-size: 28px;
            color: var(--primary);
        }
        
        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text);
        }
        
        .card p {
            color: var(--dark-gray);
            margin-bottom: 20px;
        }

        .ui-panel {
            max-width: 720px;
            margin: 0 auto;
        }

        .mode-option {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 16px 18px;
            border-radius: 12px;
            border: 1px solid var(--medium-gray);
            background: var(--light-gray);
            margin-bottom: 20px;
        }

        .mode-label {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: var(--text);
        }

        .mode-label input {
            margin-right: 6px;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 2px 10px;
            font-size: 0.8rem;
            border-radius: 999px;
            font-weight: 600;
        }

        .badge-readonly {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }

        .badge-authorized {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }

        .status-line {
            font-size: 0.95rem;
            color: var(--dark-gray);
            margin-top: 15px;
        }

        .log-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
            margin-top: 18px;
        }

        .log-controls select {
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid var(--medium-gray);
            font-size: 0.95rem;
            background: var(--light);
            color: var(--text);
        }

        .log-status {
            font-size: 0.9rem;
            color: var(--dark-gray);
            margin-top: 8px;
        }

        .stats-panel {
            display: grid;
            gap: 24px;
            margin-bottom: 32px;
        }

        .stats-header p {
            color: var(--dark-gray);
            margin-top: 6px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .stat-tile {
            background: var(--light-gray);
            border-radius: 14px;
            padding: 18px 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.2);
        }

        .stat-label {
            font-size: 0.95rem;
            color: var(--dark-gray);
            font-weight: 600;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            letter-spacing: 0.5px;
        }

        .stats-updated {
            font-size: 0.85rem;
            color: var(--dark-gray);
        }

        .whitelist-panel {
            margin-top: 25px;
            padding: 18px;
            border-radius: 12px;
            border: 1px solid var(--medium-gray);
            background: var(--light);
        }

        .whitelist-panel h4 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--text);
        }

        .whitelist-helper {
            font-size: 0.95rem;
            color: var(--dark-gray);
            margin-bottom: 15px;
        }

        .whitelist-input {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .whitelist-input input {
            flex: 1 1 240px;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid var(--medium-gray);
        }

        .whitelist-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 0;
            padding: 0;
        }

        .whitelist-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 8px;
            background: var(--light-gray);
            border: 1px solid var(--medium-gray);
            font-size: 0.95rem;
        }

        .whitelist-item span {
            font-weight: 600;
            color: var(--text);
        }

        .whitelist-item button {
            background: transparent;
            border: none;
            color: var(--danger);
            font-weight: 600;
            cursor: pointer;
        }

        .target-select {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-top: 16px;
        }

        .target-select select {
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid var(--medium-gray);
            background: var(--light);
        }

        .schedule-panel {
            background: var(--light-gray);
            border-radius: 12px;
            padding: 20px;
            display: grid;
            gap: 16px;
            margin-top: 20px;
        }

        .schedule-panel h4 {
            font-size: 1.1rem;
            margin-bottom: 4px;
            color: var(--text);
        }

        .schedule-panel p {
            color: var(--dark-gray);
            font-size: 0.95rem;
        }

        .schedule-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
            gap: 16px;
        }

        .schedule-field {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .schedule-field label {
            font-weight: 600;
            color: var(--text);
        }

        .schedule-field input,
        .schedule-field select {
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid var(--medium-gray);
            background: var(--light);
            font-size: 0.95rem;
        }

        .schedule-actions {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 12px;
        }

        .schedule-status {
            font-size: 0.95rem;
            color: var(--dark-gray);
        }

        .preset-panel {
            background: var(--light-gray);
            border-radius: 12px;
            padding: 20px;
            display: grid;
            gap: 16px;
            margin-top: 20px;
        }

        .preset-panel h4 {
            font-size: 1.1rem;
            margin-bottom: 4px;
            color: var(--text);
        }

        .preset-panel p {
            color: var(--dark-gray);
            font-size: 0.95rem;
        }

        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
            gap: 16px;
        }

        .preset-field {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .preset-field label {
            font-weight: 600;
            color: var(--text);
        }

        .preset-field select {
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid var(--medium-gray);
            background: var(--light);
            font-size: 0.95rem;
        }

        .preset-details {
            display: grid;
            gap: 6px;
            font-size: 0.95rem;
            color: var(--dark-gray);
        }

        .preset-details strong {
            color: var(--text);
        }

        .preset-actions {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 12px;
        }

        .preset-status {
            font-size: 0.95rem;
            color: var(--dark-gray);
        }

        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--light);
            border-radius: 16px;
            padding: 28px;
            max-width: 420px;
            width: 100%;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--medium-gray);
        }

        .modal h4 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--text);
        }

        .modal p {
            color: var(--dark-gray);
            margin-bottom: 18px;
        }

        .modal-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 18px;
            font-weight: 600;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        
        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        /* Legal Section */
        .legal-section {
            background: #fff8f8;
            border-radius: 16px;
            padding: 40px;
            margin: 50px 0;
            border-left: 4px solid var(--danger);
        }
        
        .legal-section h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--danger);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Installation Steps */
        .steps {
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .step {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }
        
        .step-number {
            min-width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: white;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-content h4 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        /* Code Block */
        .code-block {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            font-family: monospace;
            overflow-x: auto;
            margin: 20px 0;
            border: 1px solid var(--medium-gray);
            font-size: 0.95rem;
        }
        
        .code-block code {
            color: var(--text);
            line-height: 1.8;
        }
        
        .code-keyword {
            color: #2563eb;
        }
        
        .code-comment {
            color: #94a3b8;
        }
        
        /* Support Section */
        .support-options {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
        }
        
        .support-card {
            flex: 1;
            min-width: 250px;
            max-width: 300px;
            text-align: center;
            padding: 30px;
            border-radius: 16px;
            background: var(--light);
            border: 1px solid var(--medium-gray);
            transition: var(--transition);
            box-shadow: var(--card-shadow);
        }
        
        .support-card:hover {
            background: rgba(37, 99, 235, 0.05);
            border-color: var(--primary);
            transform: translateY(-5px);
        }
        
        .support-card i {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        /* Credits */
        .credits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .credit-card {
            padding: 20px;
            background: var(--light);
            border-radius: 12px;
            border: 1px solid var(--medium-gray);
            transition: var(--transition);
            box-shadow: var(--card-shadow);
        }
        
        .credit-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }
        
        .credit-card a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        /* Download Section */
        .download-section {
            text-align: center;
            padding: 80px 0;
            background: linear-gradient(135deg, #e6f7ff 0%, #f0f9ff 100%);
            border-radius: 20px;
            margin: 80px 0;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--medium-gray);
        }
        
        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
        }
        
        .nav-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.2);
        }
        
        .nav-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(37, 99, 235, 0.3);
        }
        
        .nav-btn i {
            font-size: 1.2rem;
        }
        
        /* Footer */
        footer {
            background: var(--text);
            padding: 40px 0 20px;
            color: var(--light-gray);
        }
        
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-column {
            flex: 1;
            min-width: 250px;
        }
        
        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--light);
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: #94a3b8;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .footer-links a:hover {
            color: var(--primary);
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(100, 116, 139, 0.2);
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .device-showcase {
                position: relative;
                width: 100%;
                height: 300px;
                right: 0;
                top: 0;
                transform: none;
                margin-top: 40px;
            }
        }
        
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero {
                text-align: center;
            }
            
            .hero-content {
                margin: 0 auto;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .hero-buttons {
                justify-content: center;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <i class="fas fa-microchip"></i>
                    <span>Hydra32</span>
                </div>
                <div class="nav-links">
                    <a href="#about">About</a>
                    <a href="#features">Features</a>
                    <a href="#web-ui">Web UI</a>
                    <a href="#laws">Legal</a>
                    <a href="#install">Installation</a>
                    <a href="#support">Support</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>ESP32 Wi-Fi Security Testing Tool</h1>
                <p>Hydra32 is an open-source project that transforms the ESP32 into a powerful Wi-Fi security testing device for educational purposes and authorized penetration testing.</p>
                
                <div class="hero-buttons">
                    <a href="#install" class="btn btn-primary">
                        <i class="fas fa-download"></i> Get Started
                    </a>
                    <a href="#laws" class="btn btn-outline">
                        <i class="fas fa-gavel"></i> Legal Guidelines
                    </a>
                </div>
            </div>
            <div class="device-showcase"></div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">About Hydra32</h2>
                <p class="section-subtitle">Understanding the purpose and capabilities of this security tool</p>
            </div>
            
            <div class="card">
                <p>Hydra32 is an open-source project developed by SameerAlSahab that transforms the ESP32 into a versatile Wi-Fi penetration testing device. Built for security professionals and ethical hackers, Hydra32 provides a suite of tools to test network vulnerabilities and enhance security awareness.</p>
                <br>
                <p>The project emphasizes responsible use and education, with built-in safeguards to prevent misuse. Hydra32 is designed for:</p>
                <ul style="padding-left: 20px; margin-top: 15px;">
                    <li>Security researchers testing their own networks</li>
                    <li>Educational demonstrations of Wi-Fi vulnerabilities</li>
                    <li>Developing and testing network security protocols</li>
                    <li>Understanding wireless security mechanisms</li>
                </ul>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" disabled>
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button class="nav-btn" onclick="document.getElementById('features').scrollIntoView({behavior: 'smooth'})">
                    Next: Features <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="alternate">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Key Features</h2>
                <p class="section-subtitle">Powerful capabilities packed into an affordable ESP32 device</p>
            </div>
            
            <div class="features-grid">
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-wifi"></i>
                    </div>
                    <h3>Wi-Fi Deauthentication</h3>
                    <p>Send deauthentication frames to disconnect devices from access points for security testing.</p>
                </div>
                
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-broadcast-tower"></i>
                    </div>
                    <h3>Beacon Spam</h3>
                    <p>Flood the area with fake access points to test network visibility and detection systems.</p>
                </div>
                
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-laptop-code"></i>
                    </div>
                    <h3>Web Interface</h3>
                    <p>Control Hydra32 through an intuitive web-based interface accessible from any device.</p>
                </div>
                
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Security Protocols</h3>
                    <p>Test various security protocols and their vulnerabilities in a controlled environment.</p>
                </div>
                
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-plug"></i>
                    </div>
                    <h3>ESP32 Compatibility</h3>
                    <p>Designed specifically for ESP32 Devkit V1 and compatible development boards.</p>
                </div>
                
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h3>Timed Operations</h3>
                    <p>Schedule attacks to run for specific durations with automatic shutdown.</p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="document.getElementById('about').scrollIntoView({behavior: 'smooth'})">
                    <i class="fas fa-arrow-left"></i> Previous: About
                </button>
                <button class="nav-btn" onclick="document.getElementById('web-ui').scrollIntoView({behavior: 'smooth'})">
                    Next: Web UI <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Web UI Section -->
    <section id="web-ui" class="alternate">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Web UI: Authorized Tests</h2>
                <p class="section-subtitle">Whitelist approved SSIDs/BSSIDs and confirm authorization before starting any active request.</p>
            </div>

            <div class="card stats-panel">
                <div class="stats-header">
                    <h3>Live Scan Metrics</h3>
                    <p>Snapshot of nearby access points, detected clients, and authorized attack sessions.</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-tile">
                        <span class="stat-label">Total AP</span>
                        <span class="stat-value" id="stat-total-aps">--</span>
                    </div>
                    <div class="stat-tile">
                        <span class="stat-label">Total Clients</span>
                        <span class="stat-value" id="stat-total-clients">--</span>
                    </div>
                    <div class="stat-tile">
                        <span class="stat-label">Attack Sessions</span>
                        <span class="stat-value" id="stat-attack-sessions">--</span>
                    </div>
                </div>
                <p class="stats-updated" id="stats-updated">Last updated: waiting for device...</p>
            </div>

            <div class="card ui-panel">
                <h3>Mode Selection</h3>
                <div class="mode-option">
                    <label class="mode-label" for="mode-passive-recon">
                        <input type="radio" id="mode-passive-recon" name="mode" checked>
                        Authorized Test
                        <span class="badge badge-authorized">authorization required</span>
                    </label>
                    <p>Use this mode only with explicit permission and a whitelisted SSID/BSSID.</p>
                </div>

                <div class="whitelist-panel">
                    <h4>Authorized Target Whitelist</h4>
                    <p class="whitelist-helper">Add SSIDs or BSSIDs that you have permission to test. Attack requests are rejected if the target is not whitelisted.</p>
                    <div class="whitelist-input">
                        <input type="text" id="whitelist-input" placeholder="e.g. Office-WiFi or AA:BB:CC:DD:EE:FF">
                        <button class="btn btn-outline" id="add-whitelist">
                            <i class="fas fa-plus"></i> Add Target
                        </button>
                    </div>
                    <ul class="whitelist-list" id="whitelist-list"></ul>
                    <div class="target-select">
                        <label for="attack-target">Attack target (must be in whitelist)</label>
                        <select id="attack-target">
                            <option value="">Select a whitelisted target</option>
                        </select>
                    </div>
                </div>

                <div class="schedule-panel">
                    <div>
                        <h4>Schedule Authorized Test</h4>
                        <p>Pick a start time, duration, and whitelisted target. The firmware will start on schedule and stop automatically.</p>
                    </div>
                    <div class="schedule-grid">
                        <div class="schedule-field">
                            <label for="schedule-start">Start time</label>
                            <input type="datetime-local" id="schedule-start">
                        </div>
                        <div class="schedule-field">
                            <label for="schedule-duration">Duration (minutes)</label>
                            <input type="number" id="schedule-duration" min="1" max="180" value="15">
                        </div>
                        <div class="schedule-field">
                            <label for="schedule-target">Target (whitelisted)</label>
                            <select id="schedule-target">
                                <option value="">Select a whitelisted target</option>
                            </select>
                        </div>
                    </div>
                    <div class="schedule-actions">
                        <button class="btn btn-outline" id="schedule-attack" type="button">
                            <i class="fas fa-calendar-check"></i> Schedule
                        </button>
                        <p class="schedule-status" id="schedule-status">Schedule status: idle</p>
                    </div>
                </div>

                <div class="preset-panel">
                    <div>
                        <h4>Attack Presets</h4>
                        <p>Select a preset profile and target to launch a pre-tuned configuration without manual parameter input.</p>
                    </div>
                    <div class="preset-grid">
                        <div class="preset-field">
                            <label for="preset-select">Preset profile</label>
                            <select id="preset-select">
                                <option value="">Select a preset</option>
                                <option value="deauth_short">Deauth Short</option>
                                <option value="beacon_burst">Beacon Burst</option>
                                <option value="stealth">Stealth</option>
                            </select>
                        </div>
                        <div class="preset-field">
                            <label for="preset-target">Target (whitelisted)</label>
                            <select id="preset-target">
                                <option value="">Select a whitelisted target</option>
                            </select>
                        </div>
                    </div>
                    <div class="preset-details" id="preset-details">
                        <div><strong>Duration:</strong> <span id="preset-duration">--</span></div>
                        <div><strong>Interval:</strong> <span id="preset-interval">--</span></div>
                        <div><strong>Channel:</strong> <span id="preset-channel">--</span></div>
                        <div id="preset-description"></div>
                    </div>
                    <div class="preset-actions">
                        <button class="btn btn-outline" id="run-preset" type="button">
                            <i class="fas fa-bolt"></i> Run Preset
                        </button>
                        <p class="preset-status" id="preset-status">Preset status: idle</p>
                    </div>
                </div>

                <button class="btn btn-primary" id="start-passive-recon">
                    <i class="fas fa-play"></i> Start
                </button>
                <p class="status-line" id="passive-recon-status">Status: idle</p>
                <div class="log-controls">
                    <label for="log-format">Log format</label>
                    <select id="log-format">
                        <option value="csv">CSV</option>
                        <option value="json">JSON</option>
                    </select>
                    <button class="btn btn-outline" id="download-log" type="button">
                        <i class="fas fa-file-download"></i> Download Log
                    </button>
                </div>
                <p class="log-status" id="log-status">Log download: idle</p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="document.getElementById('features').scrollIntoView({behavior: 'smooth'})">
                    <i class="fas fa-arrow-left"></i> Previous: Features
                </button>
                <button class="nav-btn" onclick="document.getElementById('laws').scrollIntoView({behavior: 'smooth'})">
                    Next: Legal <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Legal Section -->
    <section id="laws">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Legal & Ethical Use</h2>
                <p class="section-subtitle">Understanding the boundaries of responsible security testing</p>
            </div>
            
            <div class="legal-section">
                <h3><i class="fas fa-exclamation-triangle"></i> Important Legal Disclaimer</h3>
                <p>Hydra32 is developed strictly for educational purposes and authorized security testing. Unauthorized use against networks or devices you do not own is illegal in most jurisdictions.</p>
                <br>
                <p><strong>⚠️ Always obtain explicit written consent before testing any network that is not your own.</strong></p>
                <br>
                <p>Key legal frameworks to be aware of:</p>
                <ul style="padding-left: 20px; margin-top: 15px;">
                    <li><strong>Computer Fraud and Abuse Act (CFAA)</strong> - United States</li>
                    <li><strong>Computer Misuse Act</strong> - United Kingdom</li>
                    <li><strong>EU Cybercrime Directive</strong> - European Union</li>
                    <li><strong>Telecommunications Regulations</strong> - Various countries</li>
                </ul>
                <br>
                <p>Core packet injection logic is intentionally omitted from public repositories to:</p>
                <ul style="padding-left: 20px;">
                    <li>Prevent misuse by unskilled individuals</li>
                    <li>Comply with security research ethics</li>
                    <li>Avoid distributing potentially harmful code</li>
                    <li>Encourage genuine learning of network protocols</li>
                </ul>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="document.getElementById('web-ui').scrollIntoView({behavior: 'smooth'})">
                    <i class="fas fa-arrow-left"></i> Previous: Web UI
                </button>
                <button class="nav-btn" onclick="document.getElementById('install').scrollIntoView({behavior: 'smooth'})">
                    Next: Installation <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Installation Section -->
    <section id="install" class="alternate">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Installation Guide</h2>
                <p class="section-subtitle">Get Hydra32 up and running on your ESP32 device</p>
            </div>
            
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Hardware Requirements</h4>
                        <p>You'll need an ESP32 Devkit V1 (or compatible board) and a USB cable for flashing.</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Download Firmware</h4>
                        <p>Get the latest firmware binaries from the GitHub releases page:</p>
                        <a href="https://github.com/SameerAlSahab/Hydra32/releases" class="btn btn-primary" style="margin-top: 10px;">
                            <i class="fab fa-github"></i> Download Releases
                        </a>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Flash Firmware</h4>
                        <p>Use ESP32 Flash Download Tool or esptool.py to flash the firmware:</p>
                        <div class="code-block">
                            <code>
                                <span class="code-comment"># Using esptool.py</span><br>
                                esptool.py -p /dev/ttyS5 -b 115200 write_flash \<br>
                                &nbsp;&nbsp;--flash_mode dio --flash_freq 40m --flash_size detect \<br>
                                &nbsp;&nbsp;0x8000 partitions-table.bin \<br>
                                &nbsp;&nbsp;0x1000 bootloader.bin \<br>
                                &nbsp;&nbsp;0x10000 hydra32.bin
                            </code>
                        </div>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Connect & Access</h4>
                        <p>After flashing, connect to the Hydra32 access point and navigate to the web interface at 192.168.4.1.</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="document.getElementById('laws').scrollIntoView({behavior: 'smooth'})">
                    <i class="fas fa-arrow-left"></i> Previous: Legal
                </button>
                <button class="nav-btn" onclick="document.getElementById('support').scrollIntoView({behavior: 'smooth'})">
                    Next: Support <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Support Section -->
    <section id="support">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Support the Project</h2>
                <p class="section-subtitle">Help Hydra32 grow and improve - no money required!</p>
            </div>
            
            <div class="support-options">
                <div class="support-card">
                    <i class="fab fa-github"></i>
                    <h3>Star on GitHub</h3>
                    <p>Show your support by starring the repository to increase visibility.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px; display: inline-block;">
                        <i class="fas fa-star"></i> Star Project
                    </a>
                </div>
                
                <div class="support-card">
                    <i class="fas fa-bug"></i>
                    <h3>Report Issues</h3>
                    <p>Help improve Hydra32 by reporting bugs and issues you encounter.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px; display: inline-block;">
                        <i class="fas fa-bug"></i> Report Issue
                    </a>
                </div>
                
                <div class="support-card">
                    <i class="fas fa-lightbulb"></i>
                    <h3>Suggest Features</h3>
                    <p>Contribute ideas for new features and improvements.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px; display: inline-block;">
                        <i class="fas fa-comment"></i> Suggest Feature
                    </a>
                </div>
            </div>
            
            <p style="text-align: center; margin-top: 40px; max-width: 700px; margin-left: auto; margin-right: auto;">
                <strong>Note:</strong> I do not accept monetary donations. Your contributions through code, testing, and community support are what keep this project alive and evolving.
            </p>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="document.getElementById('install').scrollIntoView({behavior: 'smooth'})">
                    <i class="fas fa-arrow-left"></i> Previous: Installation
                </button>
                <button class="nav-btn" onclick="document.getElementById('credits').scrollIntoView({behavior: 'smooth'})">
                    Next: Credits <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Credits Section -->
    <section id="credits" class="alternate">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Credits & Inspiration</h2>
                <p class="section-subtitle">Standing on the shoulders of giants</p>
            </div>
            
            <div class="credits-grid">
                <div class="credit-card">
                    <h3>SpacehuhnTech</h3>
                    <p>ESP8266 Deauther project that inspired the initial concept</p>
                    <a href="https://github.com/SpacehuhnTech/esp8266_deauther" target="_blank">
                        <i class="fab fa-github"></i> View on GitHub
                    </a>
                </div>
                
                <div class="credit-card">
                    <h3>Risinek</h3>
                    <p>ESP32 Wi-Fi Penetration Tool that provided foundational code</p>
                    <a href="https://github.com/risinek/esp32-wifi-penetration-tool" target="_blank">
                        <i class="fab fa-github"></i> View on GitHub
                    </a>
                </div>
                
                <div class="credit-card">
                    <h3>Jeija</h3>
                    <p>ESP32Free80211 library that enables raw packet handling</p>
                    <a href="https://github.com/Jeija/esp32free80211" target="_blank">
                        <i class="fab fa-github"></i> View on GitHub
                    </a>
                </div>
            </div>
            
            <div class="download-section">
                <h2 style="font-size: 2.2rem; margin-bottom: 20px;">Ready to Get Started?</h2>
                <p style="font-size: 1.2rem; max-width: 700px; margin: 0 auto 30px;">Download the latest release of Hydra32 and start testing your network security today</p>
                <a href="https://github.com/SameerAlSahab/Hydra32/releases" class="btn btn-primary" style="font-size: 1.2rem; padding: 15px 40px;">
                    <i class="fas fa-download"></i> Download Now
                </a>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="document.getElementById('support').scrollIntoView({behavior: 'smooth'})">
                    <i class="fas fa-arrow-left"></i> Previous: Support
                </button>
                <button class="nav-btn" disabled>
                    Next <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </section>

    <div class="modal-overlay" id="authorization-modal" role="dialog" aria-modal="true" aria-labelledby="authorization-title">
        <div class="modal">
            <h4 id="authorization-title">Confirm Authorization</h4>
            <p>Before starting an attack, confirm that you have explicit authorization for the selected target.</p>
            <label class="modal-checkbox" for="authorization-check">
                <input type="checkbox" id="authorization-check">
                I have authorization
            </label>
            <div class="modal-actions">
                <button class="btn btn-outline" id="cancel-authorization">Cancel</button>
                <button class="btn btn-primary" id="confirm-authorization" disabled>
                    <i class="fas fa-check"></i> Confirm Start
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Hydra32</h3>
                    <p>Advanced Wi-Fi penetration tool for the ESP32 platform, designed for security research and education.</p>
                </div>
                
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-book"></i> Documentation</a></li>
                        <li><a href="https://github.com/SameerAlSahab/Hydra32"><i class="fab fa-github"></i> GitHub Repository</a></li>
                        <li><a href="#"><i class="fas fa-exclamation-triangle"></i> Responsible Use Guide</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-balance-scale"></i> Terms of Use</a></li>
                        <li><a href="#"><i class="fas fa-user-shield"></i> Privacy Policy</a></li>
                        <li><a href="#"><i class="fas fa-gavel"></i> Legal Disclaimer</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2025 SameerAlSahab. All rights reserved. Hydra32 is for educational and authorized testing purposes only.</p>
            </div>
        </div>
    </footer>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        // Sticky header effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            header.classList.toggle('sticky', window.scrollY > 0);
        });
        
        // Update navigation button states
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all buttons
                document.querySelectorAll('.nav-btn').forEach(b => {
                    b.classList.remove('active');
                });
                // Add active class to clicked button
                this.classList.add('active');
            });
        });

        const passiveReconButton = document.getElementById('start-passive-recon');
        const passiveReconStatus = document.getElementById('passive-recon-status');
        const whitelistInput = document.getElementById('whitelist-input');
        const whitelistList = document.getElementById('whitelist-list');
        const addWhitelistButton = document.getElementById('add-whitelist');
        const attackTargetSelect = document.getElementById('attack-target');
        const authorizationModal = document.getElementById('authorization-modal');
        const authorizationCheck = document.getElementById('authorization-check');
        const cancelAuthorization = document.getElementById('cancel-authorization');
        const confirmAuthorization = document.getElementById('confirm-authorization');
        const scheduleStartInput = document.getElementById('schedule-start');
        const scheduleDurationInput = document.getElementById('schedule-duration');
        const scheduleTargetSelect = document.getElementById('schedule-target');
        const scheduleAttackButton = document.getElementById('schedule-attack');
        const scheduleStatus = document.getElementById('schedule-status');
        const presetSelect = document.getElementById('preset-select');
        const presetTargetSelect = document.getElementById('preset-target');
        const presetDetails = document.getElementById('preset-details');
        const presetDuration = document.getElementById('preset-duration');
        const presetInterval = document.getElementById('preset-interval');
        const presetChannel = document.getElementById('preset-channel');
        const presetDescription = document.getElementById('preset-description');
        const runPresetButton = document.getElementById('run-preset');
        const presetStatus = document.getElementById('preset-status');
        const downloadLogButton = document.getElementById('download-log');
        const logFormatSelect = document.getElementById('log-format');
        const logStatus = document.getElementById('log-status');
        const statTotalAps = document.getElementById('stat-total-aps');
        const statTotalClients = document.getElementById('stat-total-clients');
        const statAttackSessions = document.getElementById('stat-attack-sessions');
        const statsUpdated = document.getElementById('stats-updated');

        const whitelistStorageKey = 'hydra32Whitelist';
        let whitelist = [];
        const metricsEndpoint = '/metrics.json';
        const metricsPollInterval = 10000;
        let pendingAuthorizationAction = null;

        const attackPresets = {
            deauth_short: {
                label: 'Deauth Short',
                durationMs: 15000,
                intervalMs: 200,
                channel: 6,
                description: 'Short burst to validate deauth responsiveness.'
            },
            beacon_burst: {
                label: 'Beacon Burst',
                durationMs: 30000,
                intervalMs: 100,
                channel: 1,
                description: 'High-frequency beacon injection for visibility tests.'
            },
            stealth: {
                label: 'Stealth',
                durationMs: 60000,
                intervalMs: 750,
                channel: 11,
                description: 'Low-and-slow cadence to stay under the radar.'
            }
        };

        const normalizeTarget = (value) => value.trim();

        const loadWhitelist = () => {
            try {
                const stored = JSON.parse(localStorage.getItem(whitelistStorageKey));
                whitelist = Array.isArray(stored) ? stored : [];
            } catch (error) {
                whitelist = [];
            }
        };

        const saveWhitelist = () => {
            localStorage.setItem(whitelistStorageKey, JSON.stringify(whitelist));
        };

        const renderWhitelist = () => {
            if (!whitelistList || !attackTargetSelect || !scheduleTargetSelect || !presetTargetSelect) {
                return;
            }

            whitelistList.innerHTML = '';
            attackTargetSelect.innerHTML = '<option value="">Select a whitelisted target</option>';
            scheduleTargetSelect.innerHTML = '<option value="">Select a whitelisted target</option>';
            presetTargetSelect.innerHTML = '<option value="">Select a whitelisted target</option>';

            whitelist.forEach((entry) => {
                const item = document.createElement('li');
                item.className = 'whitelist-item';
                const label = document.createElement('span');
                label.textContent = entry;
                const removeButton = document.createElement('button');
                removeButton.type = 'button';
                removeButton.textContent = 'Remove';
                removeButton.addEventListener('click', () => {
                    whitelist = whitelist.filter((target) => target !== entry);
                    saveWhitelist();
                    renderWhitelist();
                });
                item.appendChild(label);
                item.appendChild(removeButton);
                whitelistList.appendChild(item);

                const option = document.createElement('option');
                option.value = entry;
                option.textContent = entry;
                attackTargetSelect.appendChild(option);

                const scheduleOption = document.createElement('option');
                scheduleOption.value = entry;
                scheduleOption.textContent = entry;
                scheduleTargetSelect.appendChild(scheduleOption);

                const presetOption = document.createElement('option');
                presetOption.value = entry;
                presetOption.textContent = entry;
                presetTargetSelect.appendChild(presetOption);
            });
        };

        const addWhitelistEntry = () => {
            if (!whitelistInput) {
                return;
            }
            const value = normalizeTarget(whitelistInput.value);
            if (!value) {
                return;
            }
            const exists = whitelist.some((entry) => entry.toLowerCase() === value.toLowerCase());
            if (!exists) {
                whitelist.push(value);
                saveWhitelist();
                renderWhitelist();
            }
            whitelistInput.value = '';
        };

        const isWhitelisted = (target) => {
            if (!target) {
                return false;
            }
            return whitelist.some((entry) => entry.toLowerCase() === target.toLowerCase());
        };

        const updateLogStatus = (message) => {
            if (!logStatus) {
                return;
            }
            logStatus.textContent = `Log download: ${message}`;
        };

        const formatMetricValue = (value) => {
            if (value === null || value === undefined) {
                return '--';
            }
            if (typeof value === 'number') {
                return value.toLocaleString();
            }
            const parsed = Number(value);
            if (!Number.isNaN(parsed)) {
                return parsed.toLocaleString();
            }
            return value;
        };

        const updateMetricsUI = (metrics) => {
            if (statTotalAps) {
                statTotalAps.textContent = formatMetricValue(metrics.totalAPs);
            }
            if (statTotalClients) {
                statTotalClients.textContent = formatMetricValue(metrics.totalClients);
            }
            if (statAttackSessions) {
                statAttackSessions.textContent = formatMetricValue(metrics.attackSessions);
            }
            if (statsUpdated) {
                const timestamp = metrics.updatedAt ? new Date(metrics.updatedAt) : new Date();
                const readable = Number.isNaN(timestamp.getTime())
                    ? 'recently'
                    : timestamp.toLocaleTimeString();
                statsUpdated.textContent = `Last updated: ${readable}`;
            }
        };

        const handleMetricsError = () => {
            if (statsUpdated) {
                statsUpdated.textContent = 'Last updated: unable to reach device.';
            }
        };

        const fetchMetrics = async () => {
            if (!statTotalAps || !statTotalClients || !statAttackSessions) {
                return;
            }
            try {
                const response = await fetch(`${metricsEndpoint}?t=${Date.now()}`, { cache: 'no-store' });
                if (!response.ok) {
                    throw new Error('Metrics fetch failed');
                }
                const metrics = await response.json();
                updateMetricsUI(metrics);
            } catch (error) {
                handleMetricsError();
            }
        };

        const downloadLog = async () => {
            if (!downloadLogButton) {
                return;
            }
            const format = logFormatSelect ? logFormatSelect.value : 'csv';
            updateLogStatus('requesting...');
            downloadLogButton.disabled = true;

            try {
                const response = await fetch(`/logs?format=${encodeURIComponent(format)}`);
                if (!response.ok) {
                    throw new Error('Log download failed');
                }
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                const extension = format === 'json' ? 'json' : 'csv';
                const link = document.createElement('a');
                link.href = url;
                link.download = `hydra32-log-${timestamp}.${extension}`;
                document.body.appendChild(link);
                link.click();
                link.remove();
                URL.revokeObjectURL(url);
                updateLogStatus('downloaded');
            } catch (error) {
                updateLogStatus('failed to reach device');
            } finally {
                downloadLogButton.disabled = false;
            }
        };

        const openAuthorizationModal = () => {
            if (!authorizationModal || !authorizationCheck || !confirmAuthorization) {
                return;
            }
            authorizationCheck.checked = false;
            confirmAuthorization.disabled = true;
            authorizationModal.classList.add('active');
        };

        const closeAuthorizationModal = () => {
            if (!authorizationModal) {
                return;
            }
            authorizationModal.classList.remove('active');
            pendingAuthorizationAction = null;
        };

        const requestAttack = async (target) => {
            if (!passiveReconStatus || !passiveReconButton) {
                return;
            }
            if (!isWhitelisted(target)) {
                passiveReconStatus.textContent = 'Status: request rejected by firmware (target not in whitelist).';
                return;
            }

            passiveReconStatus.textContent = 'Status: sending authorized request...';
            passiveReconButton.disabled = true;

            try {
                const response = await fetch('/attack', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        target,
                        whitelist
                    })
                });
                if (!response.ok) {
                    throw new Error('Firmware rejected request');
                }
                passiveReconStatus.textContent = 'Status: attack request accepted by device.';
            } catch (error) {
                passiveReconStatus.textContent = 'Status: unable to reach device or request denied.';
            } finally {
                passiveReconButton.disabled = false;
            }
        };

        const setPresetStatus = (message) => {
            if (!presetStatus) {
                return;
            }
            presetStatus.textContent = `Preset status: ${message}`;
        };

        const updatePresetDetails = (presetId) => {
            if (!presetDetails) {
                return;
            }
            const preset = presetId ? attackPresets[presetId] : null;

            if (!preset) {
                if (presetDuration) presetDuration.textContent = '--';
                if (presetInterval) presetInterval.textContent = '--';
                if (presetChannel) presetChannel.textContent = '--';
                if (presetDescription) {
                    presetDescription.textContent = '';
                }
                return;
            }

            if (presetDuration) presetDuration.textContent = `${(preset.durationMs / 1000).toFixed(0)}s`;
            if (presetInterval) presetInterval.textContent = `${preset.intervalMs}ms`;
            if (presetChannel) presetChannel.textContent = `${preset.channel}`;
            if (presetDescription) {
                presetDescription.textContent = preset.description;
            }
        };

        const requestPreset = async (presetId, target) => {
            if (!runPresetButton) {
                return;
            }
            if (!presetId) {
                setPresetStatus('select a preset first.');
                return;
            }
            if (!isWhitelisted(target)) {
                setPresetStatus('target is not in whitelist.');
                return;
            }

            setPresetStatus('sending preset to device...');
            runPresetButton.disabled = true;

            try {
                const params = new URLSearchParams({
                    preset: presetId,
                    target
                });
                const response = await fetch('/preset', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: params.toString()
                });
                if (!response.ok) {
                    throw new Error('Preset rejected');
                }
                setPresetStatus('preset accepted by device.');
            } catch (error) {
                setPresetStatus('unable to reach device or preset denied.');
            } finally {
                runPresetButton.disabled = false;
            }
        };

        const setScheduleStatus = (message) => {
            if (!scheduleStatus) {
                return;
            }
            scheduleStatus.textContent = `Schedule status: ${message}`;
        };

        const requestSchedule = async () => {
            if (!scheduleStartInput || !scheduleDurationInput || !scheduleTargetSelect || !scheduleAttackButton) {
                return;
            }

            const target = scheduleTargetSelect.value;
            if (!isWhitelisted(target)) {
                setScheduleStatus('target is not in whitelist.');
                return;
            }

            const startValue = scheduleStartInput.value;
            const startTimeMs = startValue ? new Date(startValue).getTime() : NaN;
            if (Number.isNaN(startTimeMs)) {
                setScheduleStatus('select a valid start time.');
                return;
            }

            const durationMinutes = Number(scheduleDurationInput.value);
            if (!Number.isFinite(durationMinutes) || durationMinutes <= 0) {
                setScheduleStatus('enter a valid duration.');
                return;
            }

            const durationMs = Math.round(durationMinutes * 60 * 1000);
            setScheduleStatus('sending schedule to device...');
            scheduleAttackButton.disabled = true;

            try {
                const response = await fetch('/schedule', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        target,
                        startTimeMs,
                        durationMs,
                        whitelist,
                        clientTimeMs: Date.now()
                    })
                });
                if (!response.ok) {
                    throw new Error('Schedule rejected');
                }
                setScheduleStatus('scheduled successfully.');
            } catch (error) {
                setScheduleStatus('unable to reach device or schedule denied.');
            } finally {
                scheduleAttackButton.disabled = false;
            }
        };

        if (addWhitelistButton) {
            addWhitelistButton.addEventListener('click', addWhitelistEntry);
        }

        if (whitelistInput) {
            whitelistInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    addWhitelistEntry();
                }
            });
        }

        if (authorizationCheck && confirmAuthorization) {
            authorizationCheck.addEventListener('change', () => {
                confirmAuthorization.disabled = !authorizationCheck.checked;
            });
        }

        if (cancelAuthorization) {
            cancelAuthorization.addEventListener('click', closeAuthorizationModal);
        }

        if (authorizationModal) {
            authorizationModal.addEventListener('click', (event) => {
                if (event.target === authorizationModal) {
                    closeAuthorizationModal();
                }
            });
        }

        if (confirmAuthorization && attackTargetSelect) {
            confirmAuthorization.addEventListener('click', async () => {
                closeAuthorizationModal();
                if (pendingAuthorizationAction) {
                    await pendingAuthorizationAction();
                }
            });
        }

        if (passiveReconButton && attackTargetSelect) {
            passiveReconButton.addEventListener('click', () => {
                const target = attackTargetSelect.value;
                if (!target) {
                    if (passiveReconStatus) {
                        passiveReconStatus.textContent = 'Status: select a whitelisted target before starting.';
                    }
                    return;
                }
                pendingAuthorizationAction = () => requestAttack(target);
                openAuthorizationModal();
            });
        }

        if (presetSelect) {
            presetSelect.addEventListener('change', () => {
                updatePresetDetails(presetSelect.value);
            });
        }

        if (runPresetButton && presetSelect && presetTargetSelect) {
            runPresetButton.addEventListener('click', () => {
                const presetId = presetSelect.value;
                const target = presetTargetSelect.value;
                if (!presetId) {
                    setPresetStatus('select a preset first.');
                    return;
                }
                if (!target) {
                    setPresetStatus('select a whitelisted target before starting.');
                    return;
                }
                pendingAuthorizationAction = () => requestPreset(presetId, target);
                openAuthorizationModal();
            });
        }

        if (scheduleAttackButton) {
            scheduleAttackButton.addEventListener('click', requestSchedule);
        }

        if (downloadLogButton) {
            downloadLogButton.addEventListener('click', downloadLog);
        }

        loadWhitelist();
        renderWhitelist();
        if (scheduleStartInput) {
            const defaultStart = new Date(Date.now() + 5 * 60 * 1000);
            scheduleStartInput.value = defaultStart.toISOString().slice(0, 16);
        }
        if (presetSelect) {
            updatePresetDetails(presetSelect.value);
        }
        fetchMetrics();
        setInterval(fetchMetrics, metricsPollInterval);
        
        // Simple animation for cards on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = "1";
                    entry.target.style.transform = "translateY(0)";
                }
            });
        }, { threshold: 0.1 });
        
        document.querySelectorAll('.card, .support-card, .credit-card').forEach(card => {
            card.style.opacity = "0";
            card.style.transform = "translateY(20px)";
            card.style.transition = "opacity 0.5s ease, transform 0.5s ease";
            observer.observe(card);
        });
    </script>
</body>
</html>
